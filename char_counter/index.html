<html>
  <head>
    <!-- Meta -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>글자 수 계산기 char counter</title>
    <!-- import -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+jjXkk+Q2h455rYXK/7HAuoJl+0I4" crossorigin="anonymous"></script>
   <style> .body { background-color: black; color: white; } </style>
  </head>
  
  <body class='body'>
    <center class='container'><br>
      <textarea class="bg-dark form-control text-white" id="title" placeholder="내용을 적으세요." style='width: 80%; height: 300px;' onkeyup='getDetail(this)'></textarea>
      <div id='details' class='mt-3'>공백 포함: 0자 (0 byte) <br>
공백 제외: 0자 (0 byte)</div>
    </center>
    
    <script>
   var lang = 0
   
   function getBytes(str) {
    let cnt = 0;

    for (let i = 0; i < str.length; i += 1) {
      var chr = str.charAt(i);

      if (escape(chr).length > 4) cnt += 2;
      else cnt += 1;
    }
    return cnt;
  }

  function getDetail(e) {
    var val = e.value
    var len = val.length
    var no_space = ''
    var byte = getBytes(val)

    for (var i in val) {
      if (val[i] != ' ') { no_space += val[i] }
    }
    
    var text = `Including spaces: ${len} characters (${byte} byte) <br>
Excluding spaces: ${no_space.length} characters (${getBytes(no_space)} byte)`
    
    if (lang) { text = `<span>공백 포함: <b>${len}자</b> (${byte} byte)</span> <br>
    공백 제외: ${no_space.length}자 (${getBytes(no_space)} byte)`}

    details.innerHTML = text
  }
  
  window.onload = function() {
    var e = document.querySelector("#details");
    if (navigator.language == 'ko-KR') { lang = 1 }
    if (lang == 0) { e.innerHTML = `Including spaces: 0 characters (0 byte) <br>
Excluding spaces: 0 characters (0 byte)` }
  }
    </script>
  </body>
</html>
